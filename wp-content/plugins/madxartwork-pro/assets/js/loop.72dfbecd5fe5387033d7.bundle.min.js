/*! madxartwork-pro - v3.9.2 - 21-12-2022 */
"use strict";(self.webpackChunkmadxartwork_pro=self.webpackChunkmadxartwork_pro||[]).push([[149],{5030:(e,t,n)=>{var o=n(8003).__;Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=createElement,t.default=function addDocumentHandle(e){let{element:t,id:n,title:i=o("Template","madxartwork-pro")}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(s===l){if(!n||!t)throw Error("`id` and `element` are required.");if(isCurrentlyEditing(t)||hasHandle(t))return}const a=createHandleElement({title:i,onClick:()=>onDocumentClick(n,l,r)},l);t.prepend(a),s===l&&(t.dataset.editablemadxartworkDocument=n)};const i="madxartwork-document-handle",s="edit",l="madxartwork-document-save-back-handle";function isCurrentlyEditing(e){return e.classList.contains("madxartwork-edit-mode")}function hasHandle(e){return!!e.querySelector(":scope > .madxartwork-document-handle")}function createHandleElement(e,t){let{title:n,onClick:r}=e;const a=createElement({tag:"div",classNames:s===t?[i]:[i,l],children:[createElement({tag:"i",classNames:[getHandleIcon(t)]}),createElement({tag:"div",classNames:[`${s===t?i:l}__title`],children:[document.createTextNode(s===t?o("Edit %s","madxartwork-pro").replace("%s",n):o("Save %s","madxartwork-pro").replace("%s",n))]})]});return a.addEventListener("click",r),a}function getHandleIcon(e){let t="eicon-edit";return"save"===e&&(t=madxartworkFrontend.config.is_rtl?"eicon-arrow-right":"eicon-arrow-left"),t}function createElement(e){let{tag:t,classNames:n=[],children:o=[]}=e;const i=document.createElement(t);return i.classList.add(...n),o.forEach((e=>i.appendChild(e))),i}async function onDocumentClick(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s===t?(window.top.$e.internal("panel/state-loading"),await window.top.$e.run("editor/documents/switch",{id:parseInt(e),onClose:n}),window.top.$e.internal("panel/state-ready")):(madxartworkCommon.api.internal("panel/state-loading"),madxartworkCommon.api.run("editor/documents/switch",{id:madxartwork.config.initial_document.id,mode:"save",shouldScroll:!1}).finally((()=>madxartworkCommon.api.internal("panel/state-ready"))))}},9491:(e,t,n)=>{var o=n(8003).__,i=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(n(2298)),l=i(n(5030));class LoopGrid extends s.default{getSkinPrefix(){return""}getDefaultSettings(){const e=super.getDefaultSettings();return e.selectors.post=".madxartwork-loop-container .madxartwork",e.selectors.postsContainer=".madxartwork-loop-container",e}fitImages(){}getVerticalSpaceBetween(){return this.getElementSettings(this.getSkinPrefix()+"row_gap.size")}onInPlaceEditTemplate(){const e=this.getElementSettings("template_id");["style#loop-"+e,"link#font-loop-"+e,"style#loop-dynamic-"+e].forEach((e=>{this.$element.find(e).remove()}))}attachEditDocumentHandle(){const e=this.$element.find('[data-madxartwork-type="loop-item"]').first()[0],t=this.getElementSettings("template_id");e&&t&&(0,l.default)({element:e,title:o("Template","madxartwork-pro"),id:t},"edit",(()=>this.onInPlaceEditTemplate()))}handleCTA(){const e=document.querySelector(`[data-id="${this.getID()}"] .e-loop-empty-view__wrapper`);if(!e)return;const t=e.attachShadow({mode:"open"});t.appendChild(madxartworkPro.modules.loopBuilder.getCtaStyles()),t.appendChild(madxartworkPro.modules.loopBuilder.getCtaContent());t.querySelector(".e-loop-empty-view__box-cta").addEventListener("click",(()=>{madxartworkPro.modules.loopBuilder.createTemplate()}))}doEditorInitAction(){madxartwork.hooks.doAction("editor/widgets/loop-grid/on-init",this)}onInit(){super.onInit(...arguments),madxartworkFrontend.isEditMode()&&(this.doEditorInitAction(),this.attachEditDocumentHandle(),this.handleCTA())}}t.default=LoopGrid},2298:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=madxartworkModules.frontend.handlers.Base.extend({getSkinPrefix:()=>"classic_",bindEvents(){madxartworkFrontend.addListenerOnce(this.getModelCID(),"resize",this.onWindowResize)},unbindEvents(){madxartworkFrontend.removeListeners(this.getModelCID(),"resize",this.onWindowResize)},getClosureMethodsNames(){return madxartworkModules.frontend.handlers.Base.prototype.getClosureMethodsNames.apply(this,arguments).concat(["fitImages","onWindowResize","runMasonry"])},getDefaultSettings:()=>({classes:{fitHeight:"madxartwork-fit-height",hasItemRatio:"madxartwork-has-item-ratio"},selectors:{postsContainer:".madxartwork-posts-container",post:".madxartwork-post",postThumbnail:".madxartwork-post__thumbnail",postThumbnailImage:".madxartwork-post__thumbnail img"}}),getDefaultElements(){var e=this.getSettings("selectors");return{$postsContainer:this.$element.find(e.postsContainer),$posts:this.$element.find(e.post)}},fitImage(e){var t=this.getSettings(),n=e.find(t.selectors.postThumbnail),o=n.find("img")[0];if(o){var i=n.outerHeight()/n.outerWidth(),s=o.naturalHeight/o.naturalWidth;n.toggleClass(t.classes.fitHeight,s<i)}},fitImages(){var e=jQuery,t=this,n=getComputedStyle(this.$element[0],":after").content,o=this.getSettings();t.isMasonryEnabled()?this.elements.$postsContainer.removeClass(o.classes.hasItemRatio):(this.elements.$postsContainer.toggleClass(o.classes.hasItemRatio,!!n.match(/\d/)),this.elements.$posts.each((function(){var n=e(this),i=n.find(o.selectors.postThumbnailImage);t.fitImage(n),i.on("load",(function(){t.fitImage(n)}))})))},setColsCountSettings(){var e,t=madxartworkFrontend.getCurrentDeviceMode(),n=this.getElementSettings(),o=this.getSkinPrefix();switch(t){case"mobile":e=n[o+"columns_mobile"];break;case"tablet":e=n[o+"columns_tablet"];break;default:e=n[o+"columns"]}this.setSettings("colsCount",e)},isMasonryEnabled(){return!!this.getElementSettings(this.getSkinPrefix()+"masonry")},initMasonry(){imagesLoaded(this.elements.$posts,this.runMasonry)},getVerticalSpaceBetween(){let e=this.getElementSettings(this.getSkinPrefix()+"row_gap.size");return""===this.getSkinPrefix()&&""===e&&(e=this.getElementSettings(this.getSkinPrefix()+"item_gap.size")),e},runMasonry(){var e=this.elements;e.$posts.css({marginTop:"",transitionDuration:""}),this.setColsCountSettings();var t=this.getSettings("colsCount"),n=this.isMasonryEnabled()&&t>=2;if(e.$postsContainer.toggleClass("madxartwork-posts-masonry",n),!n)return void e.$postsContainer.height("");const o=this.getVerticalSpaceBetween();new madxartworkModules.utils.Masonry({container:e.$postsContainer,items:e.$posts.filter(":visible"),columnsCount:this.getSettings("colsCount"),verticalSpaceBetween:o||0}).run()},run(){setTimeout(this.fitImages,0),this.initMasonry()},onInit(){madxartworkModules.frontend.handlers.Base.prototype.onInit.apply(this,arguments),this.bindEvents(),this.run()},onWindowResize(){this.fitImages(),this.runMasonry()},onElementChange(){this.fitImages(),setTimeout(this.runMasonry)}});t.default=n}}]);